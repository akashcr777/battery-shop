{"ast":null,"code":"import React,{useState,useEffect,useCallback}from\"react\";import{useNavigate}from\"react-router-dom\";import{useContext}from\"react\";import{AuthContext}from\"../context/AuthContext\";import api from\"../utils/api\";import\"./Orders.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TRACK_STATUSES=[\"accepted\",\"ready-to-deliver\",\"out-for-delivery\"];const Orders=()=>{const{user,loading:authLoading}=useContext(AuthContext);const navigate=useNavigate();const[orders,setOrders]=useState([]);const[cancellationCount,setCancellationCount]=useState(0);const[loading,setLoading]=useState(true);const[trackOrderId,setTrackOrderId]=useState(null);const[trackOrder,setTrackOrder]=useState(null);const fetchOrders=useCallback(async()=>{try{const response=await api.get(\"/orders/my-orders\");setOrders(response.data.orders||response.data);setCancellationCount(response.data.cancellationCount||0);}catch(error){console.error(\"Error fetching orders:\",error);}finally{setLoading(false);}},[]);useEffect(()=>{// Wait for auth to load before checking role\nif(authLoading){return;}// Ensure only regular users (non-admin) can access this page\nif(user&&user.role===\"admin\"){navigate(\"/admin\");return;}// Only fetch orders if user is not an admin\nif(user&&user.role!==\"admin\"){fetchOrders();// Auto-refresh every 5 seconds to get latest status updates\nconst interval=setInterval(fetchOrders,5000);return()=>clearInterval(interval);}},[user,navigate,authLoading,fetchOrders]);const handleCancelOrder=async(orderId,orderAmount)=>{const fineAmount=cancellationCount>=2?Math.max(orderAmount*0.05,100):0;let confirmMessage=\"Are you sure you want to cancel this order?\";if(cancellationCount>=2){confirmMessage+=\"\\n\\n\\u26A0\\uFE0F WARNING: You have already cancelled \".concat(cancellationCount,\" orders.\\nCancelling this order will result in a fine of \\u20B9\").concat(fineAmount.toFixed(2),\".\");}else if(cancellationCount===1){confirmMessage+=\"\\n\\n\\u26A0\\uFE0F Note: You have cancelled 1 order. If you cancel this order, the next cancellation will result in a fine.\";}if(!window.confirm(confirmMessage)){return;}try{const response=await api.put(\"/orders/\".concat(orderId,\"/cancel\"));alert(response.data.fineApplied?\"Order cancelled. A fine of \\u20B9\".concat(response.data.fineAmount.toFixed(2),\" has been applied.\"):\"Order cancelled successfully.\");fetchOrders();}catch(error){var _error$response,_error$response$data;alert(\"Error cancelling order: \"+(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message));}};const getStatusColor=status=>{const colors={pending:\"#ffc107\",accepted:\"#17a2b8\",\"ready-to-deliver\":\"#28a745\",\"out-for-delivery\":\"#007bff\",delivered:\"#28a745\",cancelled:\"#dc3545\"};return colors[status]||\"#666\";};const getStatusText=status=>{const statusMessages={pending:\"‚è≥ Pending - Waiting for Admin Approval\",accepted:\"‚öôÔ∏è Order Processing\",\"ready-to-deliver\":\"üì¶ Ready for Delivery\",\"out-for-delivery\":\"üöö Delivery is Out Now\",delivered:\"‚úÖ Delivered Successfully\",cancelled:\"‚ùå Cancelled\"};return statusMessages[status]||status.split(\"-\").map(word=>word.charAt(0).toUpperCase()+word.slice(1)).join(\" \");};const getStatusIcon=status=>{const icons={pending:\"‚è≥\",accepted:\"‚öôÔ∏è\",\"ready-to-deliver\":\"üì¶\",\"out-for-delivery\":\"üöö\",delivered:\"‚úÖ\",cancelled:\"‚ùå\"};return icons[status]||\"üìã\";};// Poll single order for tracking (Swiggy-like live)\nuseEffect(()=>{if(!trackOrderId||!user)return;const fetchTrackOrder=async()=>{try{const res=await api.get(\"/orders/\".concat(trackOrderId));setTrackOrder(res.data);}catch(e){setTrackOrder(null);}};fetchTrackOrder();const interval=setInterval(fetchTrackOrder,5000);return()=>clearInterval(interval);},[trackOrderId,user]);const statusSteps=[{key:\"pending\",label:\"Order placed\"},{key:\"accepted\",label:\"Processing\"},{key:\"ready-to-deliver\",label:\"Ready for delivery\"},{key:\"out-for-delivery\",label:\"On the way\"},{key:\"delivered\",label:\"Delivered\"}];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"orders-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading orders...\"})});}if(orders.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"no-orders\",children:/*#__PURE__*/_jsx(\"p\",{children:\"You have no orders yet.\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orders-list\",children:orders.map(order=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"order-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Order #\",order._id.slice(-6).toUpperCase()]}),/*#__PURE__*/_jsx(\"p\",{className:\"order-date\",children:new Date(order.createdAt).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-status\",style:{backgroundColor:getStatusColor(order.status)},children:[/*#__PURE__*/_jsx(\"span\",{className:\"status-icon\",children:getStatusIcon(order.status)}),/*#__PURE__*/_jsx(\"span\",{className:\"status-text\",children:getStatusText(order.status)})]})]}),order.status===\"accepted\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-banner processing-banner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"banner-icon\",children:\"\\u2699\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Order Processing!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your order is being processed. We're preparing it for delivery!\"})]})]}),order.status===\"out-for-delivery\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-banner delivery-banner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"banner-icon\",children:\"\\uD83D\\uDE9A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery is Out Now!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your order is out for delivery. It will reach you soon!\"})]})]}),order.status===\"delivered\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"status-banner delivered-banner\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"banner-icon\",children:\"\\u2705\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"banner-content\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivered Successfully!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your order has been delivered successfully. Thank you for shopping with us!\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-items\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bill Items:\"}),order.items.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"order-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"order-item-name\",children:item.productName}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-item-price\",children:[item.quantity,\" \\xD7 \\u20B9\",item.price,\" = \\u20B9\",item.quantity*item.price]})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bill-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bill-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",order.totalAmount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delivery Charges:\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u20B90\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-row bill-total-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",order.totalAmount]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"billing-date\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Billing Date:\"}),\" \",new Date(order.billingDate||order.createdAt).toLocaleDateString(\"en-IN\",{year:\"numeric\",month:\"long\",day:\"numeric\",hour:\"2-digit\",minute:\"2-digit\"})]}),order.deliveryAddress&&/*#__PURE__*/_jsxs(\"div\",{className:\"order-address\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery Address:\"}),\" \",Object.values(order.deliveryAddress).filter(Boolean).join(\", \")]}),order.cancellationFine>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"cancellation-fine\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u26A0\\uFE0F Cancellation Fine:\"}),\" \\u20B9\",order.cancellationFine.toFixed(2)]})]}),TRACK_STATUSES.includes(order.status)&&/*#__PURE__*/_jsx(\"div\",{className:\"order-actions\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"track-order-btn\",onClick:()=>setTrackOrderId(order._id),children:\"\\uD83D\\uDCCD Track order (live)\"})}),order.status!==\"delivered\"&&order.status!==\"cancelled\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"order-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel-order-btn\",onClick:()=>handleCancelOrder(order._id,order.totalAmount),children:cancellationCount>=2?/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\u274C Cancel Order (Fine: \\u20B9\",Math.max(order.totalAmount*0.05,100).toFixed(2),\")\"]}):/*#__PURE__*/_jsx(_Fragment,{children:\"\\u274C Cancel Order\"})}),cancellationCount>0&&cancellationCount<2&&/*#__PURE__*/_jsxs(\"p\",{className:\"cancellation-warning\",children:[\"\\u26A0\\uFE0F You have cancelled \",cancellationCount,\" order(s). Next cancellation will result in a fine.\"]})]})]},order._id))}),trackOrderId&&/*#__PURE__*/_jsx(\"div\",{className:\"track-modal-overlay\",onClick:()=>{setTrackOrderId(null);setTrackOrder(null);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"track-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"track-modal-close\",onClick:()=>{setTrackOrderId(null);setTrackOrder(null);},children:\"\\u2715\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCCD Live order tracking\"}),trackOrder?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"track-order-id\",children:[\"Order #\",trackOrder._id.slice(-6).toUpperCase()]}),/*#__PURE__*/_jsx(\"div\",{className:\"track-status-timeline\",children:statusSteps.map((step,i)=>{const idx=statusSteps.findIndex(s=>s.key===trackOrder.status);const done=i<=idx;return/*#__PURE__*/_jsxs(\"div\",{className:\"track-step \".concat(done?\"done\":\"\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"track-step-dot\",children:done?\"‚úì\":i+1}),/*#__PURE__*/_jsx(\"span\",{className:\"track-step-label\",children:step.label})]},step.key);})}),/*#__PURE__*/_jsxs(\"p\",{className:\"track-current-status\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",getStatusText(trackOrder.status)]}),trackOrder.status===\"out-for-delivery\"&&trackOrder.currentDeliveryLocation&&/*#__PURE__*/_jsxs(\"div\",{className:\"track-driver-location\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDE9A Driver's current location (updates every 5 sec):\"}),/*#__PURE__*/_jsx(\"a\",{href:\"https://www.google.com/maps?q=\".concat(trackOrder.currentDeliveryLocation.latitude,\",\").concat(trackOrder.currentDeliveryLocation.longitude),target:\"_blank\",rel:\"noopener noreferrer\",className:\"track-map-link\",children:\"View on map\"}),trackOrder.currentDeliveryLocation.updatedAt&&/*#__PURE__*/_jsxs(\"span\",{className:\"track-updated\",children:[\"Last updated: \",new Date(trackOrder.currentDeliveryLocation.updatedAt).toLocaleTimeString()]})]}),trackOrder.deliveryAddress&&/*#__PURE__*/_jsxs(\"div\",{className:\"track-delivery-address\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Delivery to:\"}),\" \",Object.values(trackOrder.deliveryAddress).filter(Boolean).join(\", \")]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading tracking info...\"})]})})]});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useContext","AuthContext","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TRACK_STATUSES","Orders","user","loading","authLoading","navigate","orders","setOrders","cancellationCount","setCancellationCount","setLoading","trackOrderId","setTrackOrderId","trackOrder","setTrackOrder","fetchOrders","response","get","data","error","console","role","interval","setInterval","clearInterval","handleCancelOrder","orderId","orderAmount","fineAmount","Math","max","confirmMessage","concat","toFixed","window","confirm","put","alert","fineApplied","_error$response","_error$response$data","message","getStatusColor","status","colors","pending","accepted","delivered","cancelled","getStatusText","statusMessages","split","map","word","charAt","toUpperCase","slice","join","getStatusIcon","icons","fetchTrackOrder","res","e","statusSteps","key","label","className","children","length","order","_id","Date","createdAt","toLocaleString","style","backgroundColor","items","item","index","productName","quantity","price","totalAmount","billingDate","toLocaleDateString","year","month","day","hour","minute","deliveryAddress","Object","values","filter","Boolean","cancellationFine","includes","type","onClick","stopPropagation","step","i","idx","findIndex","s","done","currentDeliveryLocation","href","latitude","longitude","target","rel","updatedAt","toLocaleTimeString"],"sources":["C:/Users/akash/Downloads/pilot-battery-shop-fullstack-mongodb/pilot-battery-shop/frontend/src/pages/Orders.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport api from \"../utils/api\";\r\nimport \"./Orders.css\";\r\n\r\nconst TRACK_STATUSES = [\"accepted\", \"ready-to-deliver\", \"out-for-delivery\"];\r\n\r\nconst Orders = () => {\r\n  const { user, loading: authLoading } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const [orders, setOrders] = useState([]);\r\n  const [cancellationCount, setCancellationCount] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const [trackOrderId, setTrackOrderId] = useState(null);\r\n  const [trackOrder, setTrackOrder] = useState(null);\r\n\r\n  const fetchOrders = useCallback(async () => {\r\n    try {\r\n      const response = await api.get(\"/orders/my-orders\");\r\n      setOrders(response.data.orders || response.data);\r\n      setCancellationCount(response.data.cancellationCount || 0);\r\n    } catch (error) {\r\n      console.error(\"Error fetching orders:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Wait for auth to load before checking role\r\n    if (authLoading) {\r\n      return;\r\n    }\r\n    \r\n    // Ensure only regular users (non-admin) can access this page\r\n    if (user && user.role === \"admin\") {\r\n      navigate(\"/admin\");\r\n      return;\r\n    }\r\n    \r\n    // Only fetch orders if user is not an admin\r\n    if (user && user.role !== \"admin\") {\r\n      fetchOrders();\r\n      // Auto-refresh every 5 seconds to get latest status updates\r\n      const interval = setInterval(fetchOrders, 5000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [user, navigate, authLoading, fetchOrders]);\r\n\r\n  const handleCancelOrder = async (orderId, orderAmount) => {\r\n    const fineAmount = cancellationCount >= 2 ? Math.max(orderAmount * 0.05, 100) : 0;\r\n    \r\n    let confirmMessage = \"Are you sure you want to cancel this order?\";\r\n    if (cancellationCount >= 2) {\r\n      confirmMessage += `\\n\\n‚ö†Ô∏è WARNING: You have already cancelled ${cancellationCount} orders.\\nCancelling this order will result in a fine of ‚Çπ${fineAmount.toFixed(2)}.`;\r\n    } else if (cancellationCount === 1) {\r\n      confirmMessage += `\\n\\n‚ö†Ô∏è Note: You have cancelled 1 order. If you cancel this order, the next cancellation will result in a fine.`;\r\n    }\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await api.put(`/orders/${orderId}/cancel`);\r\n      alert(\r\n        response.data.fineApplied\r\n          ? `Order cancelled. A fine of ‚Çπ${response.data.fineAmount.toFixed(2)} has been applied.`\r\n          : \"Order cancelled successfully.\"\r\n      );\r\n      fetchOrders();\r\n    } catch (error) {\r\n      alert(\"Error cancelling order: \" + (error.response?.data?.message || error.message));\r\n    }\r\n  };\r\n\r\n  const getStatusColor = (status) => {\r\n    const colors = {\r\n      pending: \"#ffc107\",\r\n      accepted: \"#17a2b8\",\r\n      \"ready-to-deliver\": \"#28a745\",\r\n      \"out-for-delivery\": \"#007bff\",\r\n      delivered: \"#28a745\",\r\n      cancelled: \"#dc3545\",\r\n    };\r\n    return colors[status] || \"#666\";\r\n  };\r\n\r\n  const getStatusText = (status) => {\r\n    const statusMessages = {\r\n      pending: \"‚è≥ Pending - Waiting for Admin Approval\",\r\n      accepted: \"‚öôÔ∏è Order Processing\",\r\n      \"ready-to-deliver\": \"üì¶ Ready for Delivery\",\r\n      \"out-for-delivery\": \"üöö Delivery is Out Now\",\r\n      delivered: \"‚úÖ Delivered Successfully\",\r\n      cancelled: \"‚ùå Cancelled\",\r\n    };\r\n    return statusMessages[status] || status\r\n      .split(\"-\")\r\n      .map((word) => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(\" \");\r\n  };\r\n\r\n  const getStatusIcon = (status) => {\r\n    const icons = {\r\n      pending: \"‚è≥\",\r\n      accepted: \"‚öôÔ∏è\",\r\n      \"ready-to-deliver\": \"üì¶\",\r\n      \"out-for-delivery\": \"üöö\",\r\n      delivered: \"‚úÖ\",\r\n      cancelled: \"‚ùå\",\r\n    };\r\n    return icons[status] || \"üìã\";\r\n  };\r\n\r\n  // Poll single order for tracking (Swiggy-like live)\r\n  useEffect(() => {\r\n    if (!trackOrderId || !user) return;\r\n    const fetchTrackOrder = async () => {\r\n      try {\r\n        const res = await api.get(`/orders/${trackOrderId}`);\r\n        setTrackOrder(res.data);\r\n      } catch (e) {\r\n        setTrackOrder(null);\r\n      }\r\n    };\r\n    fetchTrackOrder();\r\n    const interval = setInterval(fetchTrackOrder, 5000);\r\n    return () => clearInterval(interval);\r\n  }, [trackOrderId, user]);\r\n\r\n  const statusSteps = [\r\n    { key: \"pending\", label: \"Order placed\" },\r\n    { key: \"accepted\", label: \"Processing\" },\r\n    { key: \"ready-to-deliver\", label: \"Ready for delivery\" },\r\n    { key: \"out-for-delivery\", label: \"On the way\" },\r\n    { key: \"delivered\", label: \"Delivered\" },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"orders-container\">\r\n        <div className=\"loading\">Loading orders...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (orders.length === 0) {\r\n    return (\r\n      <div className=\"orders-container\">\r\n        <h1>My Orders</h1>\r\n        <div className=\"no-orders\">\r\n          <p>You have no orders yet.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"orders-container\">\r\n      <h1>My Orders</h1>\r\n      <div className=\"orders-list\">\r\n        {orders.map((order) => (\r\n          <div key={order._id} className=\"order-card\">\r\n            <div className=\"order-header\">\r\n              <div>\r\n                <h3>Order #{order._id.slice(-6).toUpperCase()}</h3>\r\n                <p className=\"order-date\">\r\n                  {new Date(order.createdAt).toLocaleString()}\r\n                </p>\r\n              </div>\r\n              <div\r\n                className=\"order-status\"\r\n                style={{ backgroundColor: getStatusColor(order.status) }}\r\n              >\r\n                <span className=\"status-icon\">{getStatusIcon(order.status)}</span>\r\n                <span className=\"status-text\">{getStatusText(order.status)}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Status Update Banner */}\r\n            {order.status === \"accepted\" && (\r\n              <div className=\"status-banner processing-banner\">\r\n                <span className=\"banner-icon\">‚öôÔ∏è</span>\r\n                <div className=\"banner-content\">\r\n                  <strong>Order Processing!</strong>\r\n                  <p>Your order is being processed. We're preparing it for delivery!</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {order.status === \"out-for-delivery\" && (\r\n              <div className=\"status-banner delivery-banner\">\r\n                <span className=\"banner-icon\">üöö</span>\r\n                <div className=\"banner-content\">\r\n                  <strong>Delivery is Out Now!</strong>\r\n                  <p>Your order is out for delivery. It will reach you soon!</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {order.status === \"delivered\" && (\r\n              <div className=\"status-banner delivered-banner\">\r\n                <span className=\"banner-icon\">‚úÖ</span>\r\n                <div className=\"banner-content\">\r\n                  <strong>Delivered Successfully!</strong>\r\n                  <p>Your order has been delivered successfully. Thank you for shopping with us!</p>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"order-items\">\r\n              <h4>Bill Items:</h4>\r\n              {order.items.map((item, index) => (\r\n                <div key={index} className=\"order-item\">\r\n                  <div className=\"order-item-name\">{item.productName}</div>\r\n                  <div className=\"order-item-price\">\r\n                    {item.quantity} √ó ‚Çπ{item.price} = ‚Çπ{item.quantity * item.price}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"order-footer\">\r\n              <div className=\"bill-summary\">\r\n                <div className=\"bill-row\">\r\n                  <span>Subtotal:</span>\r\n                  <span>‚Çπ{order.totalAmount}</span>\r\n                </div>\r\n                <div className=\"bill-row\">\r\n                  <span>Delivery Charges:</span>\r\n                  <span>‚Çπ0</span>\r\n                </div>\r\n                <div className=\"bill-row bill-total-row\">\r\n                  <span><strong>Total Amount:</strong></span>\r\n                  <span><strong>‚Çπ{order.totalAmount}</strong></span>\r\n                </div>\r\n              </div>\r\n              <div className=\"billing-date\">\r\n                <strong>Billing Date:</strong>{\" \"}\r\n                {new Date(order.billingDate || order.createdAt).toLocaleDateString(\"en-IN\", {\r\n                  year: \"numeric\",\r\n                  month: \"long\",\r\n                  day: \"numeric\",\r\n                  hour: \"2-digit\",\r\n                  minute: \"2-digit\",\r\n                })}\r\n              </div>\r\n              {order.deliveryAddress && (\r\n                <div className=\"order-address\">\r\n                  <strong>Delivery Address:</strong>{\" \"}\r\n                  {Object.values(order.deliveryAddress).filter(Boolean).join(\", \")}\r\n                </div>\r\n              )}\r\n              {order.cancellationFine > 0 && (\r\n                <div className=\"cancellation-fine\">\r\n                  <strong>‚ö†Ô∏è Cancellation Fine:</strong> ‚Çπ{order.cancellationFine.toFixed(2)}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Track order (Swiggy-like) */}\r\n            {TRACK_STATUSES.includes(order.status) && (\r\n              <div className=\"order-actions\">\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"track-order-btn\"\r\n                  onClick={() => setTrackOrderId(order._id)}\r\n                >\r\n                  üìç Track order (live)\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Cancel Button */}\r\n            {order.status !== \"delivered\" && order.status !== \"cancelled\" && (\r\n              <div className=\"order-actions\">\r\n                <button\r\n                  className=\"cancel-order-btn\"\r\n                  onClick={() => handleCancelOrder(order._id, order.totalAmount)}\r\n                >\r\n                  {cancellationCount >= 2 ? (\r\n                    <>‚ùå Cancel Order (Fine: ‚Çπ{Math.max(order.totalAmount * 0.05, 100).toFixed(2)})</>\r\n                  ) : (\r\n                    <>‚ùå Cancel Order</>\r\n                  )}\r\n                </button>\r\n                {cancellationCount > 0 && cancellationCount < 2 && (\r\n                  <p className=\"cancellation-warning\">\r\n                    ‚ö†Ô∏è You have cancelled {cancellationCount} order(s). Next cancellation will result in a fine.\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Track order modal - live updates like Swiggy */}\r\n      {trackOrderId && (\r\n        <div className=\"track-modal-overlay\" onClick={() => { setTrackOrderId(null); setTrackOrder(null); }}>\r\n          <div className=\"track-modal\" onClick={(e) => e.stopPropagation()}>\r\n            <button type=\"button\" className=\"track-modal-close\" onClick={() => { setTrackOrderId(null); setTrackOrder(null); }}>‚úï</button>\r\n            <h2>üìç Live order tracking</h2>\r\n            {trackOrder ? (\r\n              <>\r\n                <p className=\"track-order-id\">Order #{trackOrder._id.slice(-6).toUpperCase()}</p>\r\n                <div className=\"track-status-timeline\">\r\n                  {statusSteps.map((step, i) => {\r\n                    const idx = statusSteps.findIndex((s) => s.key === trackOrder.status);\r\n                    const done = i <= idx;\r\n                    return (\r\n                      <div key={step.key} className={`track-step ${done ? \"done\" : \"\"}`}>\r\n                        <span className=\"track-step-dot\">{done ? \"‚úì\" : i + 1}</span>\r\n                        <span className=\"track-step-label\">{step.label}</span>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n                <p className=\"track-current-status\">\r\n                  <strong>Status:</strong> {getStatusText(trackOrder.status)}\r\n                </p>\r\n                {trackOrder.status === \"out-for-delivery\" && trackOrder.currentDeliveryLocation && (\r\n                  <div className=\"track-driver-location\">\r\n                    <strong>üöö Driver&apos;s current location (updates every 5 sec):</strong>\r\n                    <a\r\n                      href={`https://www.google.com/maps?q=${trackOrder.currentDeliveryLocation.latitude},${trackOrder.currentDeliveryLocation.longitude}`}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"track-map-link\"\r\n                    >\r\n                      View on map\r\n                    </a>\r\n                    {trackOrder.currentDeliveryLocation.updatedAt && (\r\n                      <span className=\"track-updated\">\r\n                        Last updated: {new Date(trackOrder.currentDeliveryLocation.updatedAt).toLocaleTimeString()}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                )}\r\n                {trackOrder.deliveryAddress && (\r\n                  <div className=\"track-delivery-address\">\r\n                    <strong>Delivery to:</strong> {Object.values(trackOrder.deliveryAddress).filter(Boolean).join(\", \")}\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <p>Loading tracking info...</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}