{"ast":null,"code":"import React from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate}from\"react-router-dom\";import{AuthProvider}from\"./context/AuthContext\";import Navbar from\"./components/Navbar\";import Home from\"./pages/Home\";import Login from\"./pages/Login\";import Register from\"./pages/Register\";import Inventory from\"./pages/Inventory\";import Products from\"./pages/Products\";import Cart from\"./pages/Cart\";import Orders from\"./pages/Orders\";import Admin from\"./pages/Admin\";import AdminLogin from\"./pages/AdminLogin\";import Contact from\"./pages/Contact\";import\"./style.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PrivateRoute(_ref){let{children}=_ref;const token=localStorage.getItem(\"token\");if(!token){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}// Check user role - ensure regular users (non-admin) can access user pages\ntry{const user=JSON.parse(localStorage.getItem(\"user\")||\"null\");if(user&&user.role===\"admin\"){// Admin users should use the admin page, redirect them\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/admin\"});}}catch(e){// If parsing fails, still allow access (token is valid)\n}return children;}function AdminRoute(_ref2){let{children}=_ref2;const token=localStorage.getItem(\"token\");if(!token){return/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"});}// Check user role from context or localStorage\ntry{const user=JSON.parse(localStorage.getItem(\"user\")||\"null\");if(user&&user.role===\"admin\"){return children;}}catch(e){// If parsing fails, redirect to login\n}return/*#__PURE__*/_jsx(Navigate,{to:\"/admin-login\"});}function App(){return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin-login\",element:/*#__PURE__*/_jsx(AdminLogin,{})}),/*#__PURE__*/_jsx(Route,{path:\"/inventory\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Inventory,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/products/:category\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Products,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Cart,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/orders\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Orders,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminRoute,{children:/*#__PURE__*/_jsx(Admin,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})})]})]})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","Navbar","Home","Login","Register","Inventory","Products","Cart","Orders","Admin","AdminLogin","Contact","jsx","_jsx","jsxs","_jsxs","PrivateRoute","_ref","children","token","localStorage","getItem","to","user","JSON","parse","role","e","AdminRoute","_ref2","App","path","element"],"sources":["C:/Users/akash/Downloads/pilot-battery-shop-fullstack-mongodb/pilot-battery-shop/frontend/src/App.js"],"sourcesContent":["import React from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { AuthProvider } from \"./context/AuthContext\";\nimport Navbar from \"./components/Navbar\";\nimport Home from \"./pages/Home\";\nimport Login from \"./pages/Login\";\nimport Register from \"./pages/Register\";\nimport Inventory from \"./pages/Inventory\";\nimport Products from \"./pages/Products\";\nimport Cart from \"./pages/Cart\";\nimport Orders from \"./pages/Orders\";\nimport Admin from \"./pages/Admin\";\nimport AdminLogin from \"./pages/AdminLogin\";\nimport Contact from \"./pages/Contact\";\nimport \"./style.css\";\n\nfunction PrivateRoute({ children }) {\n  const token = localStorage.getItem(\"token\");\n  \n  if (!token) {\n    return <Navigate to=\"/login\" />;\n  }\n  \n  // Check user role - ensure regular users (non-admin) can access user pages\n  try {\n    const user = JSON.parse(localStorage.getItem(\"user\") || \"null\");\n    if (user && user.role === \"admin\") {\n      // Admin users should use the admin page, redirect them\n      return <Navigate to=\"/admin\" />;\n    }\n  } catch (e) {\n    // If parsing fails, still allow access (token is valid)\n  }\n  \n  return children;\n}\n\nfunction AdminRoute({ children }) {\n  const token = localStorage.getItem(\"token\");\n  \n  if (!token) {\n    return <Navigate to=\"/admin-login\" />;\n  }\n  \n  // Check user role from context or localStorage\n  try {\n    const user = JSON.parse(localStorage.getItem(\"user\") || \"null\");\n    if (user && user.role === \"admin\") {\n      return children;\n    }\n  } catch (e) {\n    // If parsing fails, redirect to login\n  }\n  \n  return <Navigate to=\"/admin-login\" />;\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router>\n        <Navbar />\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n          <Route path=\"/admin-login\" element={<AdminLogin />} />\n          <Route\n            path=\"/inventory\"\n            element={\n              <PrivateRoute>\n                <Inventory />\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"/products/:category\"\n            element={\n              <PrivateRoute>\n                <Products />\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"/cart\"\n            element={\n              <PrivateRoute>\n                <Cart />\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"/orders\"\n            element={\n              <PrivateRoute>\n                <Orders />\n              </PrivateRoute>\n            }\n          />\n          <Route\n            path=\"/admin\"\n            element={\n              <AdminRoute>\n                <Admin />\n              </AdminRoute>\n            }\n          />\n          <Route path=\"/contact\" element={<Contact />} />\n        </Routes>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}