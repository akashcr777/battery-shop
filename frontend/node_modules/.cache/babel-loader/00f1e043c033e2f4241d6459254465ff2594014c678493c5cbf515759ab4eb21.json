{"ast":null,"code":"import _objectSpread from\"C:/Users/akash/Downloads/pilot-battery-shop-fullstack-mongodb/pilot-battery-shop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useContext}from\"react\";import{AuthContext}from\"../context/AuthContext\";import api from\"../utils/api\";import\"./Cart.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const{user}=useContext(AuthContext);const navigate=useNavigate();const[cart,setCart]=useState([]);const[deliveryAddress,setDeliveryAddress]=useState({street:\"\",city:\"\",state:\"\",pincode:\"\"});const[location,setLocation]=useState(null);const[loading,setLoading]=useState(false);useEffect(()=>{const savedCart=JSON.parse(localStorage.getItem(\"cart\")||\"[]\");setCart(savedCart);getLocation();},[]);const getLocation=()=>{if(!navigator.geolocation){alert(\"Location is not supported by your browser. Please enter your address manually.\");return;}// Browsers allow geolocation only on HTTPS or http://localhost (not http://192.168.x.x)\nconst isSecureContext=window.isSecureContext||window.location.hostname===\"localhost\"||window.location.hostname===\"127.0.0.1\";if(!isSecureContext){alert(\"Location works only on https:// or http://localhost. You're using \"+window.location.origin+\". Please enter your address in the fields below.\");return;}const options={enableHighAccuracy:false,timeout:15000,maximumAge:60000};navigator.geolocation.getCurrentPosition(async position=>{const coords={latitude:position.coords.latitude,longitude:position.coords.longitude};setLocation(coords);try{const res=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(coords.latitude,\"&lon=\").concat(coords.longitude,\"&addressdetails=1\"),{headers:{\"Accept-Language\":\"en\"}});const data=await res.json();const a=data.address||{};setDeliveryAddress(prev=>_objectSpread(_objectSpread({},prev),{},{street:[a.house_number,a.road,a.suburb].filter(Boolean).join(\", \")||prev.street,city:a.city||a.town||a.village||a.county||prev.city,state:a.state||prev.state,pincode:a.postcode||prev.pincode}));}catch(e){console.error(\"Reverse geocode failed:\",e);}},error=>{console.error(\"Error getting location:\",error);let msg=\"Could not get your location. Please enter address manually.\";if(error.code===1)msg=\"Location permission denied. Please enter your address manually.\";else if(error.code===2)msg=\"Location unavailable. Please enter your address manually.\";else if(error.code===3)msg=\"Location request timed out. Please enter your address manually.\";alert(msg);},options);};const updateQuantity=(productId,change)=>{const updatedCart=cart.map(item=>{if(item.productId===productId){const newQuantity=item.quantity+change;if(newQuantity<=0)return null;return _objectSpread(_objectSpread({},item),{},{quantity:newQuantity});}return item;}).filter(Boolean);setCart(updatedCart);localStorage.setItem(\"cart\",JSON.stringify(updatedCart));};const removeItem=productId=>{const updatedCart=cart.filter(item=>item.productId!==productId);setCart(updatedCart);localStorage.setItem(\"cart\",JSON.stringify(updatedCart));};const totalAmount=cart.reduce((sum,item)=>sum+item.price*item.quantity,0);const handleCheckout=async()=>{var _deliveryAddress$stre,_deliveryAddress$city,_deliveryAddress$pinc;if(!user){navigate(\"/login\");return;}if(cart.length===0){alert(\"Your cart is empty!\");return;}const hasAddress=((_deliveryAddress$stre=deliveryAddress.street)===null||_deliveryAddress$stre===void 0?void 0:_deliveryAddress$stre.trim())||((_deliveryAddress$city=deliveryAddress.city)===null||_deliveryAddress$city===void 0?void 0:_deliveryAddress$city.trim())||((_deliveryAddress$pinc=deliveryAddress.pincode)===null||_deliveryAddress$pinc===void 0?void 0:_deliveryAddress$pinc.trim());if(!hasAddress&&!location){alert(\"Please add your delivery address or use \\\"Use my location\\\" so we can deliver to you.\");return;}setLoading(true);try{// Update user location\nif(location){await api.put(\"/auth/location\",location);}const orderData={items:cart,deliveryAddress,deliveryLocation:location};const response=await api.post(\"/orders\",orderData);localStorage.removeItem(\"cart\");setCart([]);alert(\"Order placed successfully! Order ID: \"+response.data._id);navigate(\"/orders\");}catch(error){var _error$response,_error$response$data,_error$response2,_error$response2$data;const errorMessage=((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message;alert(\"Error placing order: \"+errorMessage);// If user not found, redirect to login\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.code)===\"USER_NOT_FOUND\"){localStorage.removeItem(\"token\");setTimeout(()=>{navigate(\"/login\");},2000);}}finally{setLoading(false);}};if(cart.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"empty-cart\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/inventory\"),className:\"shop-button\",children:\"Continue Shopping\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-items\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:item.productName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u20B9\",item.price,\" each\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.productId,-1),children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateQuantity(item.productId,1),children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"remove-btn\",onClick:()=>removeItem(item.productId),children:\"Remove\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-total\",children:[\"\\u20B9\",item.price*item.quantity]})]},item.productId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Checkout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Street Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.street,onChange:e=>setDeliveryAddress(_objectSpread(_objectSpread({},deliveryAddress),{},{street:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.city,onChange:e=>setDeliveryAddress(_objectSpread(_objectSpread({},deliveryAddress),{},{city:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"State\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.state,onChange:e=>setDeliveryAddress(_objectSpread(_objectSpread({},deliveryAddress),{},{state:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Pincode\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deliveryAddress.pincode,onChange:e=>setDeliveryAddress(_objectSpread(_objectSpread({},deliveryAddress),{},{pincode:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"location-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"use-location-btn\",onClick:getLocation,children:\"\\uD83D\\uDCCD Use my location\"}),location&&/*#__PURE__*/_jsx(\"p\",{className:\"location-status\",children:\"\\uD83D\\uDCCD Location captured \\u2022 Address filled from your location\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Bill Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bill-items\",children:cart.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"bill-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bill-item-name\",children:item.productName}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-item-details\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Qty: \",item.quantity]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xD7 \\u20B9\",item.price]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bill-item-total\",children:[\"= \\u20B9\",item.price*item.quantity]})]})]},item.productId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-total\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bill-total-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",totalAmount]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-total-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delivery Charges:\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u20B90\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bill-total-row final-total\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Total Amount:\"})}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",totalAmount]})})]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"checkout-button\",onClick:handleCheckout,disabled:loading,children:loading?\"Processing...\":\"Place Order & Generate Bill\"})]})]})]});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useContext","AuthContext","api","jsx","_jsx","jsxs","_jsxs","Cart","user","navigate","cart","setCart","deliveryAddress","setDeliveryAddress","street","city","state","pincode","location","setLocation","loading","setLoading","savedCart","JSON","parse","localStorage","getItem","getLocation","navigator","geolocation","alert","isSecureContext","window","hostname","origin","options","enableHighAccuracy","timeout","maximumAge","getCurrentPosition","position","coords","latitude","longitude","res","fetch","concat","headers","data","json","a","address","prev","_objectSpread","house_number","road","suburb","filter","Boolean","join","town","village","county","postcode","e","console","error","msg","code","updateQuantity","productId","change","updatedCart","map","item","newQuantity","quantity","setItem","stringify","removeItem","totalAmount","reduce","sum","price","handleCheckout","_deliveryAddress$stre","_deliveryAddress$city","_deliveryAddress$pinc","length","hasAddress","trim","put","orderData","items","deliveryLocation","response","post","_id","_error$response","_error$response$data","_error$response2","_error$response2$data","errorMessage","message","setTimeout","className","children","onClick","productName","type","value","onChange","target","disabled"],"sources":["C:/Users/akash/Downloads/pilot-battery-shop-fullstack-mongodb/pilot-battery-shop/frontend/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport api from \"../utils/api\";\r\nimport \"./Cart.css\";\r\n\r\nconst Cart = () => {\r\n  const { user } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n  const [cart, setCart] = useState([]);\r\n  const [deliveryAddress, setDeliveryAddress] = useState({\r\n    street: \"\",\r\n    city: \"\",\r\n    state: \"\",\r\n    pincode: \"\",\r\n  });\r\n  const [location, setLocation] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const savedCart = JSON.parse(localStorage.getItem(\"cart\") || \"[]\");\r\n    setCart(savedCart);\r\n    getLocation();\r\n  }, []);\r\n\r\n  const getLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      alert(\"Location is not supported by your browser. Please enter your address manually.\");\r\n      return;\r\n    }\r\n    // Browsers allow geolocation only on HTTPS or http://localhost (not http://192.168.x.x)\r\n    const isSecureContext = window.isSecureContext || window.location.hostname === \"localhost\" || window.location.hostname === \"127.0.0.1\";\r\n    if (!isSecureContext) {\r\n      alert(\r\n        \"Location works only on https:// or http://localhost. You're using \" + window.location.origin + \". Please enter your address in the fields below.\"\r\n      );\r\n      return;\r\n    }\r\n    const options = { enableHighAccuracy: false, timeout: 15000, maximumAge: 60000 };\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        const coords = {\r\n          latitude: position.coords.latitude,\r\n          longitude: position.coords.longitude,\r\n        };\r\n        setLocation(coords);\r\n        try {\r\n          const res = await fetch(\r\n            `https://nominatim.openstreetmap.org/reverse?format=json&lat=${coords.latitude}&lon=${coords.longitude}&addressdetails=1`,\r\n            { headers: { \"Accept-Language\": \"en\" } }\r\n          );\r\n          const data = await res.json();\r\n          const a = data.address || {};\r\n          setDeliveryAddress((prev) => ({\r\n            ...prev,\r\n            street: [a.house_number, a.road, a.suburb].filter(Boolean).join(\", \") || prev.street,\r\n            city: a.city || a.town || a.village || a.county || prev.city,\r\n            state: a.state || prev.state,\r\n            pincode: a.postcode || prev.pincode,\r\n          }));\r\n        } catch (e) {\r\n          console.error(\"Reverse geocode failed:\", e);\r\n        }\r\n      },\r\n      (error) => {\r\n        console.error(\"Error getting location:\", error);\r\n        let msg = \"Could not get your location. Please enter address manually.\";\r\n        if (error.code === 1) msg = \"Location permission denied. Please enter your address manually.\";\r\n        else if (error.code === 2) msg = \"Location unavailable. Please enter your address manually.\";\r\n        else if (error.code === 3) msg = \"Location request timed out. Please enter your address manually.\";\r\n        alert(msg);\r\n      },\r\n      options\r\n    );\r\n  };\r\n\r\n  const updateQuantity = (productId, change) => {\r\n    const updatedCart = cart.map((item) => {\r\n      if (item.productId === productId) {\r\n        const newQuantity = item.quantity + change;\r\n        if (newQuantity <= 0) return null;\r\n        return { ...item, quantity: newQuantity };\r\n      }\r\n      return item;\r\n    }).filter(Boolean);\r\n\r\n    setCart(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n  };\r\n\r\n  const removeItem = (productId) => {\r\n    const updatedCart = cart.filter((item) => item.productId !== productId);\r\n    setCart(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n  };\r\n\r\n  const totalAmount = cart.reduce(\r\n    (sum, item) => sum + item.price * item.quantity,\r\n    0\r\n  );\r\n\r\n  const handleCheckout = async () => {\r\n    if (!user) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    if (cart.length === 0) {\r\n      alert(\"Your cart is empty!\");\r\n      return;\r\n    }\r\n\r\n    const hasAddress = deliveryAddress.street?.trim() || deliveryAddress.city?.trim() || deliveryAddress.pincode?.trim();\r\n    if (!hasAddress && !location) {\r\n      alert(\"Please add your delivery address or use \\\"Use my location\\\" so we can deliver to you.\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      // Update user location\r\n      if (location) {\r\n        await api.put(\"/auth/location\", location);\r\n      }\r\n\r\n      const orderData = {\r\n        items: cart,\r\n        deliveryAddress,\r\n        deliveryLocation: location,\r\n      };\r\n\r\n      const response = await api.post(\"/orders\", orderData);\r\n      localStorage.removeItem(\"cart\");\r\n      setCart([]);\r\n      alert(\"Order placed successfully! Order ID: \" + response.data._id);\r\n      navigate(\"/orders\");\r\n    } catch (error) {\r\n      const errorMessage = error.response?.data?.message || error.message;\r\n      alert(\"Error placing order: \" + errorMessage);\r\n      \r\n      // If user not found, redirect to login\r\n      if (error.response?.data?.code === \"USER_NOT_FOUND\") {\r\n        localStorage.removeItem(\"token\");\r\n        setTimeout(() => {\r\n          navigate(\"/login\");\r\n        }, 2000);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (cart.length === 0) {\r\n    return (\r\n      <div className=\"cart-container\">\r\n        <div className=\"empty-cart\">\r\n          <h2>Your cart is empty</h2>\r\n          <button onClick={() => navigate(\"/inventory\")} className=\"shop-button\">\r\n            Continue Shopping\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"cart-container\">\r\n      <h1>Shopping Cart</h1>\r\n      <div className=\"cart-content\">\r\n        <div className=\"cart-items\">\r\n          {cart.map((item) => (\r\n            <div key={item.productId} className=\"cart-item\">\r\n              <div className=\"item-info\">\r\n                <h3>{item.productName}</h3>\r\n                <p>‚Çπ{item.price} each</p>\r\n              </div>\r\n              <div className=\"item-controls\">\r\n                <button onClick={() => updateQuantity(item.productId, -1)}>\r\n                  -\r\n                </button>\r\n                <span>{item.quantity}</span>\r\n                <button onClick={() => updateQuantity(item.productId, 1)}>\r\n                  +\r\n                </button>\r\n                <button\r\n                  className=\"remove-btn\"\r\n                  onClick={() => removeItem(item.productId)}\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n              <div className=\"item-total\">\r\n                ‚Çπ{item.price * item.quantity}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"checkout-section\">\r\n          <h2>Checkout</h2>\r\n          <div className=\"form-group\">\r\n            <label>Street Address</label>\r\n            <input\r\n              type=\"text\"\r\n              value={deliveryAddress.street}\r\n              onChange={(e) =>\r\n                setDeliveryAddress({ ...deliveryAddress, street: e.target.value })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>City</label>\r\n            <input\r\n              type=\"text\"\r\n              value={deliveryAddress.city}\r\n              onChange={(e) =>\r\n                setDeliveryAddress({ ...deliveryAddress, city: e.target.value })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>State</label>\r\n            <input\r\n              type=\"text\"\r\n              value={deliveryAddress.state}\r\n              onChange={(e) =>\r\n                setDeliveryAddress({ ...deliveryAddress, state: e.target.value })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label>Pincode</label>\r\n            <input\r\n              type=\"text\"\r\n              value={deliveryAddress.pincode}\r\n              onChange={(e) =>\r\n                setDeliveryAddress({\r\n                  ...deliveryAddress,\r\n                  pincode: e.target.value,\r\n                })\r\n              }\r\n            />\r\n          </div>\r\n          <div className=\"location-actions\">\r\n            <button type=\"button\" className=\"use-location-btn\" onClick={getLocation}>\r\n              üìç Use my location\r\n            </button>\r\n            {location && (\r\n              <p className=\"location-status\">üìç Location captured ‚Ä¢ Address filled from your location</p>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Bill Breakdown */}\r\n          <div className=\"bill-section\">\r\n            <h3>Bill Details</h3>\r\n            <div className=\"bill-items\">\r\n              {cart.map((item) => (\r\n                <div key={item.productId} className=\"bill-item\">\r\n                  <div className=\"bill-item-name\">{item.productName}</div>\r\n                  <div className=\"bill-item-details\">\r\n                    <span>Qty: {item.quantity}</span>\r\n                    <span>√ó ‚Çπ{item.price}</span>\r\n                    <span className=\"bill-item-total\">= ‚Çπ{item.price * item.quantity}</span>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"bill-total\">\r\n              <div className=\"bill-total-row\">\r\n                <span>Subtotal:</span>\r\n                <span>‚Çπ{totalAmount}</span>\r\n              </div>\r\n              <div className=\"bill-total-row\">\r\n                <span>Delivery Charges:</span>\r\n                <span>‚Çπ0</span>\r\n              </div>\r\n              <div className=\"bill-total-row final-total\">\r\n                <span><strong>Total Amount:</strong></span>\r\n                <span><strong>‚Çπ{totalAmount}</strong></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            className=\"checkout-button\"\r\n            onClick={handleCheckout}\r\n            disabled={loading}\r\n          >\r\n            {loading ? \"Processing...\" : \"Place Order & Generate Bill\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}